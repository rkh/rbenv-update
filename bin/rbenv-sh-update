#!/usr/bin/env bash
set -e
[ -n "$RBENV_DEBUG" ] && set -x

shell="$(basename "${RBENV_SHELL:-$SHELL}")"

case "$shell" in
fish )
  cat <<EOF
command rbenv update $@
source (rbenv init -|psub)
if isatty stdout
  set_color --bold
end
echo "Done updating rbenv"
set_color normal
EOF
  ;;
* )
  cat <<EOF
command rbenv update $@;
eval "\$(rbenv init -)";
if [ -t 1 ]; then
  printf "\\e[1;32m";
fi
printf "Done updating rbenv\\e[0m\\n";
EOF
  ;;
esac
